import { {{if eq .time true}}DateRange, {{end}}Filter, Model, {{if eq .number true}}NumberRange, {{end}}Repository, ResultInfo, Service } from 'onecore';

export interface {{.Name}}{{.env.Filter}} {|{{ range $element := .fields }}
  {{$element.name}}?: {{$element.tsFilterType}};{{end}}
}
export interface {{.Name}} {|{{ range $element := .fields }}
  {{$element.name}}?: {{$element.type}};{{end}}
}
export interface {{.Name}}{{.env.Service}} extends Service<{{.Name}}, {{.tsId}}, number | ResultInfo<{{.Name}}>, {{.Name}}{{.env.Filter}}> {
}
export interface {{.Name}}{{.env.Repository}} extends Repository<{{.Name}}, {{.tsId}}> {
}

export const {{.name}}{{.env.Model}}: Model = {
  name: '{{.name}}',
  table: '{{.table}}',
  attributes: {|{{ range $element := .fields }}
    {{$element.name}} : {|{{if eq $element.key true}}
      key: true,{{end}}{{if ne $element.type "string"}}
      type: '{{$element.jstype}}',{{else if ne $element.length 0}}
      length: {{$element.length}},{{end}}
    }{{end}}
  }
};
